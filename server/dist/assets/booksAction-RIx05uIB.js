import{o as b,p as d,q as k,t as p,v as u}from"./index-CVQA_-Qn.js";const h=()=>async(n,a)=>{try{const{currentPage:o,hasMore:g,loading:y}=a().books,{searchTerm:r,genre:s,condition:t,availabilityType:i,location:c,sort:f}=a().filters;if(!g||y)return;n(b(!0));const e=new URLSearchParams({page:o,limit:8,sort:f});r&&e.append("search",r),s&&e.append("genre",s),t&&e.append("condition",t),i&&e.append("availabilityType",i),c&&e.append("location",c);const{data:l}=await d.get(`/books?${e.toString()}`);n(k({books:l.books,page:o+1,hasMore:l.pagination.hasMore}))}catch(o){console.log(o),n(b(!1))}},v=n=>async a=>{try{a(p(!0));const{data:o}=await d.get(`/books/${n}`);a(u(o))}catch(o){console.error("Failed to load book",o)}finally{a(p(!1))}};export{h as a,v as b};
