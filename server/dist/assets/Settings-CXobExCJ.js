import{u as L,r as i,b as z,a as A,j as e,_ as M,C as h,$ as q}from"./index-D6hQ08Y0.js";import{u as _}from"./index.esm-DqYK3Ucx.js";import{A as F}from"./arrow-left-CQ6JUytA.js";import{U as f}from"./user-PSLB04mF.js";import{c as n}from"./createLucideIcon-C9Hrp4nZ.js";import{L as j}from"./loader-circle-BYwwIi0_.js";import{M as V}from"./mail-CsIYX47F.js";import{M as $}from"./map-pin-B2ya93t5.js";import{C as D}from"./chevron-down-C4ZA3iw4.js";const U=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],O=n("camera",U);const R=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],E=n("cloud-upload",R);const H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],I=n("globe",H);const G=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],B=n("save",G);const J=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],K=n("shield",J),re=()=>{const v=L(),[o,c]=i.useState(null),[x,m]=i.useState(null),[u,g]=i.useState(!1),{user:s}=z(r=>r.users),p=A(),{register:a,handleSubmit:N,reset:b,setValue:w,watch:k,formState:{errors:l,isSubmitting:y}}=_({defaultValues:{name:s?.name||"",email:s?.email||"",address:s?.address||"",city:s?.city||"",state:s?.state||"",country:s?.country||"",pincode:s?.pincode||"",lendingPreferences:{visibility:s?.lendingPreferences?.visibility||"all",onlyLocal:s?.lendingPreferences?.onlyLocal??!0}}}),d=k("lendingPreferences.onlyLocal");i.useEffect(()=>{s&&(b({name:s.name||"",email:s.email||"",address:s.address||"",city:s.city||"",state:s.state||"",country:s.country||"",pincode:s.pincode||"",lendingPreferences:{visibility:s.lendingPreferences?.visibility||"all",onlyLocal:s.lendingPreferences?.onlyLocal??!0}}),s.avatar&&m(s.avatar))},[s,b]);const P=r=>{const t=r.target.files[0];t&&(c(t),m(URL.createObjectURL(t)))},S=async()=>{if(!o)return;console.log("Submitting avatar:",o),g(!0);const r=new FormData;r.append("avatar",o);try{await p(M(r)),c(null)}catch(t){h.error(t.response?.data?.message||"Failed to update photo")}finally{g(!1)}},C=async r=>{try{await p(q(r))}catch(t){console.error(t),h.error(t.response?.data?.message||"Failed to update profile")}};return e.jsxs("div",{className:"w-full max-w-[98%] mx-auto p-4 md:p-6 bg-white rounded-xl shadow-sm border border-gray-100 my-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-gray-100",children:[e.jsx("button",{onClick:()=>v(-1),className:"p-2 rounded-full hover:bg-gray-100 text-gray-600 transition-colors",children:e.jsx(F,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Account Settings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage your profile and preferences"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-8",children:[e.jsx("div",{className:"md:col-span-3 flex flex-col gap-4",children:e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-100 flex flex-col items-center text-center sticky top-5",children:[e.jsx("h3",{className:"text-gray-900 font-bold mb-3 w-full text-left text-sm",children:"Profile Picture"}),e.jsxs("div",{className:"relative group mb-4",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-md bg-gray-200",children:x?e.jsx("img",{src:x,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(f,{size:48})})}),e.jsxs("label",{className:"absolute bottom-1 right-1 bg-gray-900 text-white p-2 rounded-full shadow-lg cursor-pointer hover:bg-black transition-all hover:scale-105 active:scale-95 border-2 border-white",children:[e.jsx(O,{size:16}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:P})]})]}),e.jsx("button",{onClick:S,disabled:!o||u,className:`
                    w-full py-2 rounded-lg text-xs font-semibold flex items-center justify-center gap-2 transition-all
                    ${o?"bg-orange-500 hover:bg-orange-600 text-white shadow-md":"bg-gray-200 text-gray-400 cursor-not-allowed"}
                `,children:u?e.jsx(j,{className:"animate-spin h-3 w-3"}):e.jsxs(e.Fragment,{children:[e.jsx(E,{size:14})," Update Photo"]})})]})}),e.jsx("div",{className:"md:col-span-9",children:e.jsxs("form",{onSubmit:N(C),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2 border-b border-gray-100 pb-2 mb-3",children:[e.jsx(f,{size:16,className:"text-orange-500"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"Display Name"}),e.jsx("input",{...a("name",{required:"Name is required"}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 outline-none transition-all focus:ring-1 focus:ring-orange-500"}),l.name&&e.jsx("span",{className:"text-xs text-red-500",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{size:14,className:"absolute left-3 top-2.5 text-gray-400"}),e.jsx("input",{...a("email"),disabled:!0,className:"w-full rounded-lg border border-gray-200 pl-9 pr-3 py-2 text-sm bg-gray-50 text-gray-400 cursor-not-allowed"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2 border-b border-gray-100 pb-2 mb-3",children:[e.jsx($,{size:16,className:"text-orange-500"}),"Address Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"Street Address"}),e.jsx("input",{...a("address",{required:"Address is required"}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 outline-none transition-all focus:ring-1 focus:ring-orange-500"}),l.address&&e.jsx("span",{className:"text-xs text-red-500",children:l.address.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"City"}),e.jsx("input",{...a("city",{required:"Required"}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 outline-none"}),l.city&&e.jsx("span",{className:"text-xs text-red-500",children:l.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"State"}),e.jsx("input",{...a("state",{required:"Required"}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"Country"}),e.jsx("input",{...a("country"),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"Pincode"}),e.jsx("input",{type:"number",...a("pincode",{required:"Required"}),className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:border-orange-500 outline-none"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 flex items-center gap-2 border-b border-gray-100 pb-2 mb-3",children:[e.jsx(K,{size:16,className:"text-orange-500"}),"Lending Privacy"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-bold uppercase text-gray-500 mb-1",children:"Profile Visibility"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{size:16,className:"absolute left-3 top-2.5 text-gray-400 z-10"}),e.jsxs("select",{...a("lendingPreferences.visibility"),className:"w-full appearance-none rounded-lg border border-gray-200 pl-9 pr-3 py-2 text-sm focus:border-orange-500 outline-none bg-white cursor-pointer",children:[e.jsx("option",{value:"all",children:"Public (Everyone)"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"verified",children:"Verified Users Only"})]}),e.jsx(D,{size:14,className:"absolute right-3 top-3 text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-lg border border-gray-100 h-full",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:"Local Only"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Only show to my City."})]}),e.jsx("button",{type:"button",onClick:()=>w("lendingPreferences.onlyLocal",!d,{shouldDirty:!0}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none
                                ${d?"bg-orange-500":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${d?"translate-x-4":"translate-x-1"}`})})]})]})]}),e.jsx("div",{className:"pt-2 flex justify-end",children:e.jsx("button",{type:"submit",disabled:y,className:"bg-black hover:bg-gray-800 text-white font-medium px-6 py-2.5 rounded-xl transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm",children:y?e.jsx(j,{className:"animate-spin h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(B,{size:16})," Save Changes"]})})})]})})]})]})};export{re as default};
