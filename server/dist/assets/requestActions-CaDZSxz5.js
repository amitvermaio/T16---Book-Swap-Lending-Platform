import{p as o,y as n,A as l,B as d,C as t,D as u,j as i}from"./index-CVQA_-Qn.js";import{c as q}from"./createLucideIcon-BOWIOHBy.js";const y=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],p=q("file-x",y),f=()=>async s=>{try{const{data:e}=await o.get("/requests?as=owner");e.requests&&s(n(e.requests))}catch(e){console.error(e)}},h=()=>async s=>{try{const{data:e}=await o.get("/requests?as=requester");e.requests&&s(l(e.requests))}catch(e){console.error(e)}},k=s=>async e=>{try{const{data:a}=await o.post("/requests",s);return a.success?(e(d(a.request)),t.success("Request Sent Successfully!"),!0):(t.error(a.message||"Failed to send request"),!1)}catch(a){t.error(a.response?.data?.message||"Failed to send request")}},w=({requestId:s,action:e,pickupInfo:a})=>async c=>{try{const{data:r}=await o.patch(`/requests/${s}/status`,{action:e,pickupInfo:a});return r.success&&e==="approved"?(c(u(s)),t.success("Request Approved! Book moved to Tracking.")):r.success&&e==="rejected"?(c(u(s)),t.success("Request Rejected.")):r.success&&e==="cancelled"?(c(u(s)),t("Request Cancelled.",{icon:i.jsx(p,{})})):t.success(r.message||"Status Updated Successfully"),!0}catch(r){console.error(r),t.error("Failed to update status")}};export{k as a,w as b,f as c,h as d};
