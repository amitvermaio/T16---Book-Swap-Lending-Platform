import{E as T,p as v,F as H,G as L,H as G,C as f,I as A,J as K,j as e,r as g,a as z,z as N,b as _,x as I,K as W}from"./index-D6hQ08Y0.js";import{N as X}from"./Navbar-B8S6qRoR.js";import{g as Y,f as J}from"./dataUtils-WcwZrQXq.js";import{C as D}from"./circle-check-big-D7MaoHrP.js";import{T as q}from"./triangle-alert-h48xCMsu.js";import{C as O,A as Q}from"./clock-JQ9xzxrc.js";import{S as Z}from"./star-DZToScwE.js";import{S as k}from"./send-BhcHrRr2.js";import{X as R}from"./x-BL0ellVK.js";import{P as ee}from"./plus-CKVMXV1q.js";import{c as w}from"./createLucideIcon-C9Hrp4nZ.js";import{C as te}from"./calendar-Ds-0EkNH.js";import{M as F}from"./map-pin-B2ya93t5.js";import{M as se}from"./message-square-DSxsq7s0.js";import{L as re}from"./loader-circle-BYwwIi0_.js";import"./check-check-CE3MAPcn.js";import"./book-open-CQ8IbAVz.js";import"./menu-BUNyt3xR.js";import"./user-PSLB04mF.js";const ae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],$=w("history",ae);const oe=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],E=w("inbox",oe);const ne=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]],ie=w("package-search",ne);const le=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ce=w("refresh-cw",le);const de=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],xe=w("scan-barcode",de),U=()=>async t=>{try{t(T(!0));const{data:s}=await v.get("/requests/active");s.data&&t(H(s.data))}catch(s){console.error(s),t(L(s.response?.data?.message||"Failed to fetch active trackings"))}},me=()=>async t=>{try{t(T(!0));const{data:s}=await v.get("/requests/history");s.data&&t(G(s.data))}catch(s){console.error(s),t(L(s.response?.data?.message||"Failed to fetch history"))}},ue=t=>async s=>{try{const{data:r}=await v.patch(`/requests/${t}/returned`,{});r.data&&(s(A(r.data)),f.success("Book returned & marked as history!"))}catch(r){console.error(r),f.error(r.response?.data?.message||"Update failed")}},ge=(t,s)=>async r=>{try{const{data:x}=await v.post(`/requests/${t}/verify`,{code:s});x.success&&(f.success("Code verified! Book collected."),r(U()))}catch(x){console.error(x),f.error(x.response?.data?.message||"Verification failed")}},pe=({requestId:t})=>async s=>{try{const{data:r}=await v.patch(`/requests/${t}/status`,{action:"cancelled"});return r.success&&(s(K(t)),s(A(r.data)),f("Request Cancelled.",{icon:e.jsx(FileX,{})})),!0}catch(r){console.error(r),f.error("Failed to update status")}},he=({targetUserId:t,requestId:s,score:r,comment:x})=>async()=>{try{const{data:a}=await v.post("/ratings",{targetUserId:t,requestId:s,score:r,comment:x});if(a.success)return f.success("Thank you for your feedback!"),!0}catch(a){return console.log(a),f.error(a.response?.data?.message||"Failed to submit rating"),!1}},be=t=>async()=>{try{const{data:s}=await v.post("/disputes",t,{headers:{"Content-Type":"multipart/form-data"}});s.success&&f.success("Dispute raised successfully")}catch(s){console.error(s),f.error(s.response?.data?.message||"Failed to create dispute")}},fe=({isOverdue:t,daysLeft:s,status:r})=>r==="collected"?e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-600 text-[10px] font-bold uppercase tracking-wider rounded-md border border-blue-100",children:[e.jsx(D,{size:10})," Collected"]}):t&&r==="approved"?e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-red-50 text-red-600 text-[10px] font-bold uppercase tracking-wider rounded-md border border-red-100",children:[e.jsx(q,{size:10})," Overdue by ",Math.abs(s)," days"]}):e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-50 text-green-600 text-[10px] font-bold uppercase tracking-wider rounded-md border border-green-100",children:[e.jsx(O,{size:10})," Active"]}),ye=({user:t,onSubmit:s})=>{const[r,x]=g.useState(0),[a,n]=g.useState(0),[p,h]=g.useState(""),[b,o]=g.useState(!1),[l,c]=g.useState(!1),i=async()=>{if(r===0)return;o(!0),await s({rating:r,comment:p})&&c(!0),o(!1)};return l?e.jsx("div",{className:"mt-3 bg-green-50 border border-green-100 rounded-xl p-4 text-center",children:e.jsxs("p",{className:"text-green-600 text-xs font-bold flex items-center justify-center gap-2",children:[e.jsx(D,{size:14})," Thanks for your feedback!"]})}):e.jsxs("div",{className:"mt-3 bg-yellow-50/40 border border-yellow-100 rounded-xl p-4 transition-all",children:[e.jsxs("p",{className:"text-xs font-bold text-gray-800 mb-2",children:["Rate your Experience with ",t]}),e.jsxs("div",{className:"flex gap-1 mb-3",children:[[1,2,3,4,5].map(m=>e.jsx("button",{type:"button",className:"focus:outline-none transition-transform active:scale-90",onClick:()=>x(m),onMouseEnter:()=>n(m),onMouseLeave:()=>n(0),children:e.jsx(Z,{size:20,className:`transition-colors duration-200 ${m<=(a||r)?"text-yellow-400 fill-yellow-400":"text-gray-300 fill-transparent"}`})},m)),e.jsx("span",{className:"ml-2 text-xs font-medium text-yellow-600 pt-0.5",children:r>0?["Poor","Fair","Good","Very Good","Excellent"][r-1]:""})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{className:"w-full text-xs p-3 pr-2 rounded-lg border border-yellow-200 bg-white focus:outline-none focus:border-yellow-400 focus:ring-1 focus:ring-yellow-400 resize-none placeholder-gray-400",rows:3,placeholder:"Write a comment (optional)...",maxLength:300,value:p,onChange:m=>h(m.target.value)}),e.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] text-gray-400",children:[p.length,"/300"]})]}),e.jsx("button",{onClick:i,disabled:r===0||b,className:`
          mt-2 w-full flex items-center justify-center gap-2 py-2 rounded-lg text-xs font-bold transition-all
          ${r===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-yellow-400 text-yellow-900 hover:bg-yellow-500 shadow-sm hover:shadow active:scale-95"}
        `,children:b?"Submitting...":e.jsxs(e.Fragment,{children:["Submit Feedback ",e.jsx(k,{size:12})]})})]})},je=({requestId:t,status:s,updatedAt:r})=>{const x=z(),a=g.useRef(null),[n,p]=g.useState(!1),[h,b]=g.useState(!1),[o,l]=g.useState({reason:"",message:"",images:[]}),c=()=>{if(s==="collected")return!0;if(s==="completed"&&r){const u=new Date(r).getTime(),d=2880*60*1e3;return Date.now()-u<d}return!1},i=u=>{const d=Array.from(u.target.files);if(o.images.length+d.length>4)return N.error("You can only upload up to 4 images");l(y=>({...y,images:[...y.images,...d]})),u.target.value=""},m=u=>{l(d=>({...d,images:d.images.filter((y,S)=>S!==u)}))};if(!c())return null;const C=async u=>{if(u.preventDefault(),!o.reason)return N.error("Please select a reason");b(!0);try{const d=new FormData;d.append("requestId",t),d.append("reason",o.reason),d.append("message",o.message),o.images.forEach(y=>{d.append("images",y)}),console.log(d),await x(be(d)),p(!1),l({reason:"",message:"",images:[]})}catch{N.error("Failed to raise dispute")}finally{b(!1)}};return n?e.jsxs("div",{className:"mt-3 p-4 border border-red-100 bg-white rounded-xl shadow-sm animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(q,{size:16,className:"text-red-500"}),"Create Dispute"]}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{size:16})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 uppercase mb-1",children:"Reason"}),e.jsxs("select",{required:!0,className:"w-full text-xs p-2 rounded-lg border border-gray-200 focus:ring-1 focus:ring-red-500 outline-none",value:o.reason,onChange:u=>l({...o,reason:u.target.value}),children:[e.jsx("option",{value:"",children:"Select a reason"}),e.jsx("option",{value:"DAMAGED_BOOK",children:"Damaged Book"}),e.jsx("option",{value:"WRONG_BOOK",children:"Wrong Book"}),e.jsx("option",{value:"NOT_DELIVERED",children:"Not Delivered"}),e.jsx("option",{value:"FAKE_CONDITION",children:"Fake Condition"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-bold text-gray-500 uppercase mb-1",children:"Message (Optional)"}),e.jsx("textarea",{className:"w-full text-xs p-2 rounded-lg border border-gray-200 focus:ring-1 focus:ring-red-500 outline-none h-20 resize-none",placeholder:"Describe your issue in detail...",value:o.message,onChange:u=>l({...o,message:u.target.value})})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsxs("label",{className:"block text-[10px] font-bold text-gray-500 uppercase mb-2",children:["Attachments (",o.images.length,"/4)"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.images.map((u,d)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border border-gray-100 bg-gray-50",children:[e.jsx("img",{src:URL.createObjectURL(u),alt:"preview",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>m(d),className:"absolute top-1 right-1 bg-black/50 text-white rounded-full p-0.5 hover:bg-black/70",children:e.jsx(R,{size:12})})]},d)),o.images.length<4&&e.jsxs("button",{type:"button",onClick:()=>a.current.click(),className:"aspect-square flex flex-col items-center justify-center border-2 border-dashed border-gray-200 rounded-lg hover:border-red-300 hover:bg-red-50 transition-colors text-gray-400",children:[e.jsx(ee,{size:18}),e.jsx("span",{className:"text-[8px] font-bold mt-1",children:"ADD"})]})]}),e.jsx("input",{type:"file",ref:a,onChange:i,accept:"image/*",multiple:!0,className:"hidden"})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:h?"Submitting...":e.jsxs(e.Fragment,{children:[e.jsx(k,{size:14}),"Submit Dispute"]})})]})]}):e.jsxs("button",{onClick:()=>p(!0),className:"w-full mt-2 flex items-center justify-center gap-2 py-2 px-4 border border-red-200 bg-red-50 text-red-600 rounded-xl text-xs font-bold hover:bg-red-100 transition-colors",children:[e.jsx(q,{size:14}),"Raise an Issue / Dispute"]})},ve=({offeredBook:t})=>t?e.jsxs("div",{className:"flex items-center gap-3 bg-orange-50/50 p-3 rounded-xl border border-orange-100 border-dashed",children:[e.jsx("img",{src:t.coverImageUrl||t.cover,alt:t.title,className:"w-10 h-14 object-cover rounded shadow-sm"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] text-orange-600 font-bold uppercase tracking-wide mb-0.5",children:"Swapped For"}),e.jsx("p",{className:"text-xs font-bold text-gray-900 truncate",children:t.title}),e.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.author})]})]}):null,Ne=({isLending:t,isUpdating:s,handleMarkReturned:r,handleCancelRequest:x,status:a,isDonate:n})=>{if(t)return a==="collected"&&!n?e.jsx("button",{onClick:r,disabled:s||a!=="collected"||n,className:`
            flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-bold transition-all
            ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-black hover:shadow-lg active:scale-95"}
          `,children:s?e.jsx("span",{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:14})," Mark Returned"]})}):e.jsx("span",{className:"text-xs font-bold text-orange-600",children:a==="approved"?"Waiting for Collection":a});if(!t)return a==="approved"?e.jsx("button",{onClick:x,className:"text-red-500 text-xs font-bold hover:bg-red-50 px-3 py-2 rounded transition-colors",children:"Cancel Request"}):e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-[10px] text-gray-400 uppercase tracking-wider font-bold",children:"Status"}),e.jsx("span",{className:"text-xs font-bold text-orange-600 capitalize",children:a})]})},we=({data:t,isLending:s})=>{const r=z(),[x,a]=g.useState(!1),[n,p]=g.useState(""),h=Y(t.dueDate),b=h!==null&&h<0,o=t.book||{},l=t.pickupInfo||{},c=s?t.requester:t.owner,i=s?"Borrower":"Lender",m=c?.name||"Unknown User",C=c?.avatar?.url||c?.avatar||"https://via.placeholder.com/40",u=c?.city&&c?.state?`${c.city}, ${c.state}`:"Location not shared",d=async()=>{window.confirm(`Confirm that "${o.title}" has been returned to you?`)&&(a(!0),await r(ue(t._id)),a(!1))},y=async()=>{if(n.length!==6)return alert("Enter 6-digit code");a(!0),await r(ge(t._id,n)),a(!1)},S=()=>{r(pe({requestId:t._id}))},P=async({rating:j,comment:M})=>{if(!c||!c._id||!t||!t._id)return;if(j<=0||j>5){N.error("Invalid rating value");return}if(M.length>300){N.error("Comment exceeds 300 characters");return}const B={targetUserId:c._id,requestId:t._id,score:j,comment:M};return await r(he(B))},V=j=>{switch(j){case"swap":return"bg-purple-50 text-purple-700 border-purple-100";case"donate":return"bg-emerald-50 text-emerald-700 border-emerald-100";default:return"bg-blue-50 text-blue-700 border-blue-100"}};return e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden group",children:[e.jsxs("div",{className:"p-5 flex gap-5",children:[e.jsxs("div",{className:"relative w-20 h-28 flex-shrink-0",children:[e.jsx("img",{src:o.coverImageUrl||o.cover,alt:o.title,className:"w-full h-full object-cover rounded-lg shadow-sm bg-gray-100"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-white p-1 rounded-full shadow-md border border-gray-100",children:t.type==="swap"?e.jsx(ce,{size:14,className:"text-orange-500"}):e.jsx(Q,{size:14,className:"text-blue-500"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide border ${V(t.type)}`,children:t.type})}),e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 truncate pr-2",children:o.title}),e.jsx(fe,{isOverdue:b,daysLeft:h,status:t.status})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["by ",o.author]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(te,{size:12,className:"text-gray-400"}),e.jsxs("span",{children:["Due: ",e.jsx("span",{className:`font-semibold ${b?"text-red-600":"text-gray-900"}`,children:t.dueDate?new Date(t.dueDate).toLocaleDateString():"No Due Date"})]})]}),h!==null&&!b&&e.jsxs("span",{className:"text-orange-600 font-medium text-[10px] bg-orange-50 px-1.5 py-0.5 rounded",children:[h," days left"]})]})]})]}),e.jsxs("div",{className:"px-5 pb-4 space-y-3",children:[t.type==="swap"&&e.jsx(ve,{offeredBook:t.offeredBook}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[l.location&&e.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx(F,{size:14,className:"mt-0.5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Meeting Point"}),e.jsx("p",{className:"leading-tight",children:l.location})]})]}),l.datetime&&e.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx(O,{size:14,className:"mt-0.5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Scheduled Time"}),e.jsx("p",{className:"leading-tight",children:J(l.datetime)})]})]})]}),(l.note||t.notes)&&e.jsxs("div",{className:"flex gap-2 text-xs text-gray-500 bg-gray-50 p-2 rounded-lg italic",children:[e.jsx(se,{size:12,className:"mt-0.5 flex-shrink-0"}),e.jsxs("p",{children:['"',l.note||t.notes,'"']})]}),!s&&t.status==="approved"&&t.exchangeCode&&e.jsxs("div",{className:"mt-3 bg-indigo-50 border border-indigo-100 rounded-xl p-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-indigo-400 tracking-wider mb-0.5",children:"Pickup Code"}),e.jsx("p",{className:"text-indigo-900 text-xs",children:"Tell this code to the owner upon collection"})]}),e.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 tracking-widest bg-white px-3 py-1 rounded border border-indigo-100 shadow-sm",children:t.exchangeCode})]}),s&&t.status==="approved"&&e.jsxs("div",{className:"mt-3 bg-orange-50 border border-orange-100 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xe,{size:14,className:"text-orange-500"}),e.jsx("p",{className:"text-xs font-bold text-orange-800",children:"Verify Collection"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",maxLength:6,placeholder:"Enter Code",className:"w-full text-xs p-2 rounded border border-gray-200 focus:outline-none focus:border-orange-500 font-mono text-center tracking-widest uppercase",value:n,onChange:j=>p(j.target.value)}),e.jsx("button",{onClick:y,disabled:x||n.length<4,className:"bg-orange-500 hover:bg-orange-600 text-white text-xs font-bold px-4 rounded transition-colors disabled:opacity-50",children:x?"...":"Verify"})]})]}),t.status==="completed"&&e.jsx(ye,{user:m,onSubmit:P}),e.jsx(je,{requestId:t._id,status:t.status,updatedAt:t.updatedAt})]}),e.jsxs("div",{className:"border-t border-gray-100 p-4 bg-gray-50/30 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("img",{src:C,alt:m,className:"w-8 h-8 rounded-full object-cover border border-white shadow-sm"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-400 font-medium mb-0.5",children:i}),e.jsx("p",{className:"text-sm font-bold text-gray-800 leading-none truncate",children:m}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] text-gray-500",children:[e.jsx(F,{size:8})," ",u]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ne,{handleCancelRequest:S,isLending:s,isUpdating:x,handleMarkReturned:d,status:t.status,isDonate:t.type==="donate"})})]})]})},Be=()=>{const t=z(),{activeTrackings:s,history:r,isLoading:x}=_(i=>i.trackings),a=_(i=>i.users.user),[n,p]=g.useState("incoming");g.useEffect(()=>(I.on("request:updated",i=>{t(W(i))}),()=>{I.off("request:updated")}),[t]),g.useEffect(()=>{(!s||s.length===0)&&t(U()),(!r||r.length===0)&&t(me())},[t]);const h=s.filter(i=>i.owner?._id===a?._id||i.owner===a?._id),b=s.filter(i=>i.requester?._id===a?._id||i.requester===a?._id);let o=[],l="",c=ie;return n==="incoming"?(o=h,l="No incoming book requests at the moment.",c=E):n==="myrequests"?(o=b,l="You haven't requested any books recently.",c=k):n==="history"&&(o=r,l="No past transaction history found.",c=$),e.jsxs("div",{className:"w-screen min-h-screen px-6 lg:px-12 bg-white text-gray-900 pb-20",children:[e.jsx(X,{}),e.jsxs("div",{className:"max-w-3xl mx-auto pt-8 pb-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Track Books"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your book exchanges and view history."}),e.jsxs("div",{className:"flex gap-6 mt-8 border-b border-gray-100 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>p("incoming"),className:`flex items-center gap-2 pb-3 text-sm font-bold uppercase tracking-wide border-b-2 transition-all whitespace-nowrap ${n==="incoming"?"border-orange-500 text-orange-600":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[e.jsx(E,{size:16}),"Incoming Requests",e.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] ${n==="incoming"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-500"}`,children:h.length})]}),e.jsxs("button",{onClick:()=>p("myrequests"),className:`flex items-center gap-2 pb-3 text-sm font-bold uppercase tracking-wide border-b-2 transition-all whitespace-nowrap ${n==="myrequests"?"border-orange-500 text-orange-600":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[e.jsx(k,{size:16}),"My Requests",e.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] ${n==="myrequests"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-500"}`,children:b.length})]}),e.jsxs("button",{onClick:()=>p("history"),className:`flex items-center gap-2 pb-3 text-sm font-bold uppercase tracking-wide border-b-2 transition-all whitespace-nowrap ${n==="history"?"border-orange-500 text-orange-600":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[e.jsx($,{size:16}),"History",r.length>0&&e.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] ${n==="history"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-500"}`,children:r.length})]})]})]}),e.jsx("div",{className:"max-w-3xl mx-auto space-y-5 mt-6",children:x?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(re,{className:"animate-spin text-orange-500"})}):o.length>0?o.map(i=>{let m=!1;return n==="incoming"?m=!0:n==="myrequests"?m=!1:m=i.owner?._id===a?._id||i.owner===a?._id,e.jsx(we,{data:i,isLending:m},i._id)}):e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-3xl mt-4 border border-dashed border-gray-200",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:e.jsx(c,{className:"text-gray-300",size:24})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"It's quiet here"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:l})]})})]})};export{Be as default};
