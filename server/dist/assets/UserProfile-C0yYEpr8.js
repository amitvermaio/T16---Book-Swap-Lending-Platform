import{O as d,P as n,p as f,Q as h,S as u,C as j,T as b,m as y,a as N,b as v,r as w,j as e}from"./index-D6hQ08Y0.js";import{N as k}from"./Navbar-B8S6qRoR.js";import{B as S}from"./BookCard-g_CEm0NB.js";import{c as z}from"./createLucideIcon-C9Hrp4nZ.js";import{M as B}from"./map-pin-B2ya93t5.js";import{C as c}from"./calendar-Ds-0EkNH.js";import{S as C}from"./star-DZToScwE.js";import{B as m}from"./book-open-CQ8IbAVz.js";import"./check-check-CE3MAPcn.js";import"./menu-BUNyt3xR.js";import"./user-PSLB04mF.js";import"./x-BL0ellVK.js";import"./constants-DytKgnBF.js";import"./clock-JQ9xzxrc.js";import"./circle-check-big-D7MaoHrP.js";import"./arrow-up-right-DgZ_bVwA.js";import"./heart-4mg5nvMK.js";const D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],F=z("shield-check",D),L=a=>async r=>{try{d(!0),n(!0);const{data:s}=await f.get(`/users/${a}`);r(h(s.user)),r(u(s.books||[]))}catch(s){j.error(s.response?.data?.message||"Oops! Failed to load profile."),r(b(s.response?.data?.message||"Oops! Failed to load profile."))}finally{n(!1),d(!1)}},i=({icon:a,label:r,value:s})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 flex items-center gap-3 shadow-sm",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-50 text-orange-600",children:a}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 leading-none",children:s}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r})]})]}),H=()=>{const{userId:a}=y(),r=N(),{user:s,books:x,loadingUser:g,loadingBooks:p,error:o}=v(t=>t.profiles);if(w.useEffect(()=>{a&&r(L(a))},[a,r]),g||p)return e.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Loading profile..."})]});if(o)return e.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:e.jsx("p",{className:"text-red-500 bg-red-50 border border-red-100 px-4 py-2 rounded-lg font-medium",children:o})});if(!s)return null;const l=x||[];return e.jsxs("div",{className:"w-screen min-h-screen bg-gray-50 px-6 lg:px-12 pb-12 max-w-7xl mx-auto",children:[e.jsx(k,{}),e.jsxs("div",{className:"relative bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden mt-6 mb-10",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-1.5 bg-orange-600"}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center lg:items-start gap-3",children:[e.jsx("img",{src:s.avatar||`https://ui-avatars.com/api/?name=${s.name}&background=f97316&color=fff`,alt:s.name,className:"w-28 h-28 rounded-full border-4 border-white shadow-lg object-cover"}),s.emailVerified&&e.jsxs("div",{className:"flex items-center gap-1 text-xs font-semibold bg-emerald-50 text-emerald-600 px-3 py-1 rounded-full",children:[e.jsx(F,{size:14}),"Verified User"]})]}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-gray-500",children:[(s.city||s.state)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{size:14,className:"text-orange-500"}),s.city,", ",s.state]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{size:14}),"Joined"," ",new Date(s.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-8",children:[e.jsx(i,{icon:e.jsx(C,{size:18}),label:"Avg Rating",value:`${s.ratingStats?.avgRating?.toFixed(1)||"0.0"} (${s.ratingStats?.totalRatings||0})`}),e.jsx(i,{icon:e.jsx(m,{size:18}),label:"Books Listed",value:l.length}),e.jsx(i,{icon:e.jsx(c,{size:18}),label:"Member Since",value:new Date(s.createdAt).getFullYear()})]})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm p-6 md:p-8",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between border-b border-gray-900 pb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-6 bg-orange-600 rounded-full"}),"Books Shelf"]})}),l.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-4 shadow-sm",children:e.jsx(m,{size:32,className:"text-gray-300"})}),e.jsx("p",{className:"text-gray-900 font-medium",children:"No books listed yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"This user hasnâ€™t shared any books."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 justify-items-center",children:l.map(t=>e.jsx(S,{...t,owner:s,location:{city:s.city,state:s.state}},t._id))})]})]})};export{H as default};
